<div class="container mt-4">
  <h4>üîç Tra c·ª©u ƒëi·ªÉm theo m√¥n h·ªçc</h4>

  <div class="mb-3">
    <label for="subject" class="form-label">Ch·ªçn m√¥n h·ªçc:</label>
    <select id="subject" class="form-select" [(ngModel)]="subjectId">
      <option [ngValue]="null">-- Ch·ªçn m√¥n h·ªçc --</option>
      <option *ngFor="let s of subjects" [ngValue]="s.id">
        {{ s.subjectCode }} - {{ s.name }}
      </option>
    </select>
  </div>

  <button class="btn btn-primary mb-4" (click)="search()" [disabled]="!subjectId">
    <i class="bi bi-search me-1"></i> Xem ƒëi·ªÉm
  </button>

  <div *ngIf="scores.length === 0 || !scores[0]?.studentCode" class="alert alert-info">
    Kh√¥ng c√≥ d·ªØ li·ªáu ƒëi·ªÉm cho m√¥n h·ªçc n√†y.
  </div>

  <div class="table-responsive" *ngIf="scores.length > 0 && scores[0]?.studentCode">
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>M√£ sinh vi√™n</th>
          <th>ƒêi·ªÉm gi·ªØa k·ª≥</th>
          <th>ƒêi·ªÉm cu·ªëi k·ª≥</th>
          <th>ƒêi·ªÉm kh√°c</th>
          <th>T·ªïng</th>
          <th>K·∫øt qu·∫£</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let score of scores">
          <td>{{ score.studentCode }}</td>
          <td>{{ score.midterm }}</td>
          <td>{{ score.final }}</td>
          <td>{{ score.other }}</td>
          <td><strong>{{ score.total }}</strong></td>
          <td>
            <span [ngClass]="score.total >= 5 ? 'text-success fw-bold' : 'text-danger fw-bold'">
              {{ score.total >= 5 ? 'ƒê·∫≠u' : 'R·ªõt' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
