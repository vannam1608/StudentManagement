<div class="container mt-4">
  <h3 class="mb-3">ğŸ“‹ Danh sÃ¡ch há»c pháº§n Ä‘ang giáº£ng dáº¡y</h3>

  <!-- Bá»™ lá»c -->
  <div class="row mb-3 g-3">
    <div class="col-md-4">
      <label for="studentFilter" class="form-label">ğŸ“ MÃ£ sinh viÃªn:</label>
      <input
        type="text"
        id="studentFilter"
        class="form-control"
        placeholder="Nháº­p mÃ£ sinh viÃªn..."
        [(ngModel)]="studentCodeFilter"
        (ngModelChange)="onStudentCodeChange()"
      />
    </div>

    <div class="col-md-4">
      <label for="subjectFilter" class="form-label">ğŸ“š TÃªn mÃ´n há»c:</label>
      <input
        type="text"
        id="subjectFilter"
        class="form-control"
        placeholder="Nháº­p tÃªn mÃ´n há»c..."
        [(ngModel)]="subjectNameFilter"
        (ngModelChange)="onSubjectNameChange()"
      />
    </div>

    <div class="col-md-4">
      <label for="semesterFilter" class="form-label">ğŸ“… Há»c ká»³:</label>
      <select
        id="semesterFilter"
        class="form-select"
        [(ngModel)]="selectedSemesterId"
        (change)="onSemesterChange()"
      >
        <option [ngValue]="null">-- Chá»n há»c ká»³ --</option>
        <option *ngFor="let semester of semesters" [ngValue]="semester.id">
          {{ semester.name }}
        </option>
      </select>
    </div>
  </div>

  <!-- Báº£ng dá»¯ liá»‡u -->
  <table class="table table-bordered table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>Há» tÃªn</th>
        <th>MÃ£ SV</th>
        <th>MÃ´n há»c</th>
        <th>MÃ£ MH</th>
        <th>Lá»›p</th>
        <th>Lá»‹ch há»c</th>
        <th>Há»c ká»³</th>
        <th>NgÃ y Ä‘Äƒng kÃ½</th>
        <th>Thao tÃ¡c</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of enrollments; let i = index; trackBy: trackById">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ item.fullName }}</td>
        <td>{{ item.studentCode }}</td>
        <td>{{ item.subjectName }}</td>
        <td>{{ item.subjectCode }}</td>
        <td>{{ item.classCode }}</td>
        <td>{{ item.schedule }}</td>
        <td>{{ item.semesterName }}</td>
        <td>{{ item.enrollDate | date: 'shortDate' }}</td>

        <td>
          <button class="btn btn-danger btn-sm" (click)="delete(item.id)">
            <i class="bi bi-trash"></i> XoÃ¡
          </button>
        </td>
      </tr>
      <tr *ngIf="enrollments?.length === 0">
        <td colspan="10" class="text-center text-muted">KhÃ´ng cÃ³ dá»¯ liá»‡u.</td>
      </tr>
    </tbody>
  </table>

  <!-- PHÃ‚N TRANG -->
  <div class="d-flex justify-content-between align-items-center mt-3">
    <button
      class="btn btn-secondary"
      [disabled]="currentPage === 1"
      (click)="goToPreviousPage()"
    >
      â† TrÆ°á»›c
    </button>
    <span>Trang {{ currentPage }} / {{ totalPages }}</span>
    <button
      class="btn btn-secondary"
      [disabled]="currentPage === totalPages"
      (click)="goToNextPage()"
    >
      Sau â†’
    </button>
  </div>
</div>
