<div class="container mt-4">
  <h3 class="mb-3">📋 Danh sách đăng ký môn học</h3>

  <!-- Bộ lọc -->
  <div class="row mb-3">
    <div class="col-md-4">
      <label for="studentFilter">🎓 Mã sinh viên:</label>
      <input
        type="text"
        id="studentFilter"
        class="form-control"
        placeholder="Nhập mã sinh viên..."
        [(ngModel)]="studentCodeFilter"
        (input)="onStudentCodeChange()"
      />
    </div>

    <div class="col-md-4">
      <label for="semesterFilter">📅 Học kỳ:</label>
      <select
        id="semesterFilter"
        class="form-control"
        [(ngModel)]="selectedSemesterId"
        (change)="onSemesterChange()"
      >
        <option [ngValue]="null">-- Tất cả học kỳ --</option>
        <option *ngFor="let semester of semesters" [ngValue]="semester.id">
          {{ semester.name }}
        </option>
      </select>
    </div>
  </div>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Họ tên</th>
        <th>Mã SV</th>
        <th>Môn học</th>
        <th>Mã MH</th>
        <th>Lớp</th>
        <th>Lịch học</th>
        <th>Học kỳ</th>
        <th>Ngày đăng ký</th>
        <th>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of enrollments; let i = index; trackBy: trackById">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ item.fullName }}</td>
        <td>{{ item.studentCode }}</td>
        <td>{{ item.subjectName }}</td>
        <td>{{ item.subjectCode }}</td>
        <td>{{ item.classCode }}</td>
        <td>{{ item.schedule }}</td>
        <td>{{ item.semesterName }}</td>
        <td>{{ item.enrollDate | date: 'shortDate' }}</td>
        <td>
          <button class="btn btn-danger btn-sm" (click)="delete(item.id)">
            <i class="bi bi-trash"></i> Xoá
          </button>
        </td>
      </tr>
      <tr *ngIf="enrollments?.length === 0">
        <td colspan="10" class="text-center">Không có dữ liệu.</td>
      </tr>
    </tbody>
  </table>

  <!-- PHÂN TRANG -->
  <div class="d-flex justify-content-between align-items-center mt-3">
    <button class="btn btn-secondary" [disabled]="currentPage === 1" (click)="goToPreviousPage()">
      ← Trước
    </button>
    <span>Trang {{ currentPage }} / {{ totalPages }}</span>
    <button
      class="btn btn-secondary"
      [disabled]="currentPage === totalPages"
      (click)="goToNextPage()"
    >
      Sau →
    </button>
  </div>
</div>
