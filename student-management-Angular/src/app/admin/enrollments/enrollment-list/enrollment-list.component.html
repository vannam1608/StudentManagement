<div class="container">
  <h3 class="mb-4">📚 Danh sách môn học đã đăng ký</h3>

  <!-- BỘ LỌC -->
  <div class="row mb-4">
    <!-- CHỌN SINH VIÊN -->
    <div class="col-md-6">
      <label class="form-label fw-semibold">🎓 Chọn sinh viên:</label>
     <select
  class="form-select"
  [(ngModel)]="selectedStudentId"
  (change)="loadEnrollments()">
  <option [ngValue]="null">-- Tất cả sinh viên --</option>
  <option *ngFor="let s of students" [ngValue]="s.id">
    {{ s.fullName }} ({{ s.studentCode }})
  </option>
</select>

    </div>

    <!-- CHỌN HỌC KỲ -->
    <div class="col-md-6">
      <label class="form-label fw-semibold">🗓️ Chọn học kỳ:</label>
      <select
        class="form-select"
        [(ngModel)]="selectedSemesterId"
        (change)="loadEnrollments()">
        <option [ngValue]="null">-- Tất cả học kỳ --</option>
        <option *ngFor="let s of semesters" [ngValue]="s.id">
          {{ s.name }}
        </option>
      </select>
    </div>
  </div>

  <!-- BẢNG DANH SÁCH ĐĂNG KÝ -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped align-middle">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Sinh viên</th>
          <th>Mã SV</th>
          <th>Môn học</th>
          <th>Mã môn</th>
          <th>Lớp học phần</th>
          <th>Thời khoá biểu</th>
          <th>Học kỳ</th>
          <th>Ngày đăng ký</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of enrollments; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ item.fullName }}</td>
          <td>{{ item.studentCode }}</td>
          <td>{{ item.subjectName }}</td>
          <td>{{ item.subjectCode }}</td>
          <td>{{ item.classCode }}</td>
          <td>{{ item.schedule }}</td>
          <td>{{ item.semesterName }}</td>
          <td>{{ item.enrollDate | date: 'shortDate' }}</td>
          <td>
            <button
              class="btn btn-danger btn-sm"
              (click)="delete(item.id)">
              <i class="bi bi-trash"></i> Xoá
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- TRẠNG THÁI RỖNG -->
  <div *ngIf="enrollments.length === 0" class="text-center text-muted mt-4">
    🙁 Không có đăng ký nào được tìm thấy.
  </div>
</div>
