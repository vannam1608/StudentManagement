<div class="container mt-4">
  <h3 class="mb-3">ğŸ“˜ Danh sÃ¡ch lá»›p há»c pháº§n</h3>

  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <div class="d-flex flex-wrap align-items-center justify-content-between mb-3 gap-2">
    <input
      [(ngModel)]="searchKeyword"
      (ngModelChange)="filterClasses()"
      class="form-control w-50"
      placeholder="ğŸ” TÃ¬m theo mÃ£ lá»›p, mÃ´n há»c..." />

    <select
      [(ngModel)]="selectedSemester"
      (change)="filterClasses()"
      class="form-select w-auto">
      <option value="">-- Táº¥t cáº£ há»c ká»³ --</option>
      <option *ngFor="let semester of availableSemesters" [value]="semester">
        {{ semester }}
      </option>
    </select>

    <button class="btn btn-primary" (click)="createClass()">â• Táº¡o lá»›p há»c pháº§n</button>
  </div>

  <table class="table table-bordered table-hover">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>MÃ£ lá»›p</th>
        <th>MÃ´n há»c</th>
        <th>GV phá»¥ trÃ¡ch</th>
        <th>Há»c ká»³</th>
        <th>Lá»‹ch há»c</th>
        <th>SÄ© sá»‘</th>
        <th>Thao tÃ¡c</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cls of courseClasses; let i = index">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ cls.classCode }}</td>
        <td>{{ cls.subjectName }}</td>
        <td>{{ cls.teacherName }}</td>
        <td>{{ cls.semesterName }}</td>
        <td>{{ cls.schedule }}</td>
        <td>{{ cls.registeredCount || 0 }} / {{ cls.maxStudents || 'âˆ' }}</td>
        <td>
          <button class="btn btn-sm btn-info me-2" (click)="viewDetail(cls.id)">ğŸ‘ï¸</button>
          <button class="btn btn-sm btn-warning me-2" (click)="editClass(cls.id)">âœï¸</button>
          <button class="btn btn-sm btn-danger" (click)="deleteClass(cls.id)">ğŸ—‘ï¸</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="mt-3">
    <button class="btn btn-secondary" (click)="prevPage()" [disabled]="currentPage === 1">â† TrÆ°á»›c</button>
    <span class="mx-2">Trang {{ currentPage }}</span>
    <button
      class="btn btn-secondary"
      (click)="nextPage()"
      [disabled]="(currentPage * pageSize) >= totalItems">Sau â†’</button>
  </div>
</div>
