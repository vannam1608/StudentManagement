<div class="container mt-4">
  <h3 class="mb-3">📘 Danh sách lớp học phần</h3>

  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <div class="d-flex flex-wrap align-items-center justify-content-between mb-3 gap-2">
    <input
      [(ngModel)]="searchKeyword"
      (ngModelChange)="filterClasses()"
      class="form-control w-50"
      placeholder="🔍 Tìm theo mã lớp, môn học..." />

    <select
      [(ngModel)]="selectedSemester"
      (change)="filterClasses()"
      class="form-select w-auto">
      <option value="">-- Tất cả học kỳ --</option>
      <option *ngFor="let semester of availableSemesters" [value]="semester">
        {{ semester }}
      </option>
    </select>

    <button class="btn btn-primary" (click)="createClass()">➕ Tạo lớp học phần</button>
  </div>

  <table class="table table-bordered table-hover">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>Mã lớp</th>
        <th>Môn học</th>
        <th>GV phụ trách</th>
        <th>Học kỳ</th>
        <th>Lịch học</th>
        <th>Sĩ số</th>
        <th>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cls of courseClasses; let i = index">
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <td>{{ cls.classCode }}</td>
        <td>{{ cls.subjectName }}</td>
        <td>{{ cls.teacherName }}</td>
        <td>{{ cls.semesterName }}</td>
        <td>{{ cls.schedule }}</td>
        <td>{{ cls.registeredCount || 0 }} / {{ cls.maxStudents || '∞' }}</td>
        <td>
          <button class="btn btn-sm btn-info me-2" (click)="viewDetail(cls.id)">👁️</button>
          <button class="btn btn-sm btn-warning me-2" (click)="editClass(cls.id)">✏️</button>
          <button class="btn btn-sm btn-danger" (click)="deleteClass(cls.id)">🗑️</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="mt-3">
    <button class="btn btn-secondary" (click)="prevPage()" [disabled]="currentPage === 1">← Trước</button>
    <span class="mx-2">Trang {{ currentPage }}</span>
    <button
      class="btn btn-secondary"
      (click)="nextPage()"
      [disabled]="(currentPage * pageSize) >= totalItems">Sau →</button>
  </div>
</div>
